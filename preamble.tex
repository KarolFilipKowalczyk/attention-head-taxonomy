%=============================================================================
% PREAMBLE.TEX - Packages, Macros, and Formatting
%=============================================================================

%-----------------------------------------------------------------------------
% Core Packages
%-----------------------------------------------------------------------------
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

%-----------------------------------------------------------------------------
% Page Layout
%-----------------------------------------------------------------------------
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\onehalfspacing

%-----------------------------------------------------------------------------
% Mathematics
%-----------------------------------------------------------------------------
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

%-----------------------------------------------------------------------------
% Tables and Figures
%-----------------------------------------------------------------------------
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{float}

%-----------------------------------------------------------------------------
% Colors and Styling
%-----------------------------------------------------------------------------
\usepackage{xcolor}
\definecolor{darkblue}{rgb}{0.0, 0.0, 0.5}
\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}
\definecolor{darkred}{rgb}{0.5, 0.0, 0.0}

%-----------------------------------------------------------------------------
% Hyperlinks and References
%-----------------------------------------------------------------------------
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=darkblue,
    citecolor=darkgreen,
    urlcolor=darkblue,
    bookmarksnumbered=true,
    pdfborder={0 0 0}
}
\usepackage{cleveref}

%-----------------------------------------------------------------------------
% Lists and Enumeration
%-----------------------------------------------------------------------------
\usepackage{enumitem}
\setlist{itemsep=0.1em, parsep=0.1em, topsep=0.3em}

%-----------------------------------------------------------------------------
% Boxes and Styling - Load tcolorbox package FIRST
%-----------------------------------------------------------------------------
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}

%-----------------------------------------------------------------------------
% Section Formatting
%-----------------------------------------------------------------------------
\usepackage{titlesec}
\titlespacing*{\section}{0pt}{1.5em}{0.8em}
\titlespacing*{\subsection}{0pt}{1.0em}{0.5em}
\titlespacing*{\subsubsection}{0pt}{1em}{0.3em}

%-----------------------------------------------------------------------------
% Table of Contents
%-----------------------------------------------------------------------------
\setcounter{tocdepth}{3}  % Show sections, subsections, and subsubsections in TOC
\setcounter{secnumdepth}{3}  % Number up to subsubsections
\usepackage{tocloft}
\setlength{\cftbeforesecskip}{2pt}
\setlength{\cftbeforesubsecskip}{1pt}
\setlength{\cftbeforesubsubsecskip}{1pt}

%-----------------------------------------------------------------------------
% Bibliography
%-----------------------------------------------------------------------------
\usepackage{natbib}
\setcitestyle{square,numbers,comma}

%-----------------------------------------------------------------------------
% Paragraph Formatting
%-----------------------------------------------------------------------------
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

%=============================================================================
% CUSTOM COMMANDS AND ENVIRONMENTS
%=============================================================================

%-----------------------------------------------------------------------------
% Depth Indicators
%-----------------------------------------------------------------------------
\newcommand{\Early}{\textsf{E}}
\newcommand{\Middle}{\textsf{M}}
\newcommand{\Late}{\textsf{L}}
\newcommand{\Final}{\textsf{F}}

%-----------------------------------------------------------------------------
% Head Entry Formatting
%-----------------------------------------------------------------------------
\newcommand{\depthinfo}[1]{\textbf{Depth:} \texttt{#1}}
\newcommand{\litnames}[1]{\textbf{Literature names:} \textit{#1}}
\newcommand{\statuswell}{\textsc{Well-documented}}
\newcommand{\statusobs}{\textsc{Observed}}
\newcommand{\statusprop}{\textsc{Proposed}}
\newcommand{\relatedheads}[1]{\textbf{Related:} #1}
\newcommand{\statusinfo}[1]{\textbf{Status:} #1}

% Compact footer: Status | Related
\newcommand{\headfooter}[2]{\noindent\statusinfo{#1} | \relatedheads{#2}}

%-----------------------------------------------------------------------------
% Attention Pattern Formatting
%-----------------------------------------------------------------------------
\newcommand{\attstrong}[1]{\textbf{Strong:} #1}
\newcommand{\attweak}[1]{\textbf{Weak:} #1}
\newcommand{\attreacts}[1]{\textbf{Reacts to:} #1}

%-----------------------------------------------------------------------------
% Example Scenario Formatting
%-----------------------------------------------------------------------------
\newcommand{\exinput}[1]{\textit{Input:} #1}
\newcommand{\exbehavior}[1]{\textit{Behavior:} #1}
\newcommand{\exeffect}[1]{\textit{Effect:} #1}

%-----------------------------------------------------------------------------
% Custom Environments (NOW tcolorbox is loaded)
%-----------------------------------------------------------------------------
\newenvironment{functiondesc}{%
    \par\vspace{0.3em}%
    \noindent%
}{\par\vspace{0.3em}}

\newtcolorbox{attentionbox}{
    colback=gray!5,
    colframe=gray!40,
    boxrule=0.5pt,
    arc=2pt,
    left=3pt,
    right=3pt,
    top=2pt,
    bottom=2pt,
    boxsep=0pt,
    before skip=0.5em,
    after skip=0.5em
}

\newtcolorbox{examplebox}{
    colback=gray!8,
    colframe=gray!50,
    boxrule=0.5pt,
    arc=2pt,
    left=4pt,
    right=4pt,
    top=3pt,
    bottom=3pt,
    boxsep=0pt,
    before skip=0.5em,
    after skip=0.5em,
    fonttitle=\small\bfseries,
    title=Example Scenario
}

\newtcolorbox{ablationbox}{
    colback=white,
    colframe=gray!30,
    boxrule=0.5pt,
    arc=2pt,
    left=3pt,
    right=3pt,
    top=2pt,
    bottom=2pt,
    boxsep=0pt,
    before skip=0.5em,
    after skip=0.5em
}

%-----------------------------------------------------------------------------
% End of Preamble
%-----------------------------------------------------------------------------
